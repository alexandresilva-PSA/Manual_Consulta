<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Template Editável de Manual</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    
    <style>
        /* --- CSS ORIGINAL (Visual e Layout) --- */
        :root {
            --teal-500: #14B8A6; --teal-600: #0D9488; --teal-700: #0F766E;
            --lime-400: #A3E635; --lime-500: #84CC16;
            --gray-50: #F9FAFB; --gray-100: #F3F4F6; --gray-200: #E5E7EB;
            --gray-400: #9CA3AF; --gray-500: #6B7280; --gray-600: #4B5563;
            --gray-700: #374151; --gray-800: #1F2937; --gray-900: #111827;
            --amber-100: #FEF3C7; --amber-500: #F59E0B;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Work Sans', sans-serif; font-size: 16px; line-height: 1.7; color: var(--gray-700); background-color: var(--gray-100); display: flex; flex-direction: column; height: 100vh; overflow: hidden; }
        
        /* HEADER */
        .header { background-color: var(--gray-900); padding: 0 1.5rem; height: 72px; display: flex; align-items: center; justify-content: space-between; flex-shrink: 0; z-index: 100; box-shadow: 0 2px 10px rgba(0,0,0,0.2); }
        .header-left { display: flex; align-items: center; gap: 1rem; }
        .logo { height: 48px; width: auto; }
        .header-divider { width: 1px; height: 28px; background-color: var(--gray-600); margin: 0 0.5rem; }
        .header-title { color: var(--gray-200); font-size: 1rem; font-weight: 400; }
        .header-right { display: flex; align-items: center; gap: 1rem; }
        .badge-versao { background-color: rgba(20, 184, 166, 0.15); color: var(--teal-500); border: 1px solid rgba(20, 184, 166, 0.3); padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.75rem; font-weight: 600; }
        
        /* LAYOUT & SIDEBAR */
        .layout { display: flex; flex: 1; overflow: hidden; }
        .sidebar { width: 280px; background-color: #fff; border-right: 1px solid var(--gray-200); display: flex; flex-direction: column; overflow-y: auto; flex-shrink: 0; transition: margin-left 0.3s ease; z-index: 90; }
        .sidebar.collapsed { margin-left: -280px; }
        .sidebar-header { padding: 1.5rem; border-bottom: 1px solid var(--gray-100); }
        .sidebar-header h2 { font-size: 0.6875rem; font-weight: 700; color: var(--gray-400); text-transform: uppercase; letter-spacing: 0.1em; }
        .sidebar-nav { padding: 1rem; flex: 1; }
        
        .nav-group { border: 1px solid var(--gray-200); border-radius: 8px; margin-bottom: 1rem; overflow: hidden; }
        .nav-group-header { background-color: var(--gray-50); padding: 0.75rem 1rem; cursor: pointer; display: flex; align-items: center; justify-content: space-between; font-weight: 600; font-size: 0.875rem; color: var(--gray-800); transition: background 0.2s; }
        .nav-group-header:hover { background-color: var(--gray-100); }
        .nav-group.collapsed .nav-group-content { display: none; }
        .nav-group.collapsed .nav-group-header .material-icons-round { transform: rotate(-90deg); }
        .nav-group-content { display: block; border-top: 1px solid var(--gray-200); }
        .sidebar-nav a { display: flex; align-items: flex-start; gap: 0.75rem; padding: 0.75rem 1rem; text-decoration: none; font-size: 0.8125rem; font-weight: 500; color: var(--gray-600); border-left: 3px solid transparent; white-space: normal; line-height: 1.4; transition: all 0.2s; }
        .sidebar-nav a:hover { background-color: var(--gray-50); color: var(--teal-600); }
        .sidebar-nav a.active { background-color: rgba(20, 184, 166, 0.1); border-left-color: var(--teal-500); color: var(--teal-700); }

        /* MAIN CONTENT */
        .main-content { flex: 1; overflow-y: auto; padding: 2rem 3rem; background-color: var(--gray-50); scroll-behavior: smooth; }
        .content-wrapper { max-width: 900px; margin: 0 auto; padding-bottom: 100px; }

        /* COMPONENTES */
        .secao { background-color: #fff; border-radius: 16px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); margin-bottom: 2rem; overflow: hidden; position: relative; scroll-margin-top: 90px; }
        .secao-header { display: flex; align-items: center; gap: 1rem; padding: 1.5rem 2rem; border-bottom: 1px solid var(--gray-100); }
        .secao-numero { width: 40px; height: 40px; border-radius: 50%; background-color: rgba(20, 184, 166, 0.1); color: var(--teal-600); display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 1.125rem; flex-shrink: 0; }
        .secao-header h2 { font-size: 1.5rem; font-weight: 700; color: var(--gray-800); flex: 1; outline: none; }
        .secao-conteudo { padding: 2rem; outline: none; }
        .secao-conteudo h3 { font-size: 1.125rem; font-weight: 600; color: var(--gray-800); margin: 2rem 0 0.75rem 0; }
        .secao-conteudo p { margin-bottom: 1rem; color: var(--gray-600); }
        
        .img-container { margin: 1.5rem 0; text-align: center; }
        .img-wrapper { position: relative; width: 100%; border: 1px solid var(--gray-200); border-radius: 12px; overflow: hidden; background-color: #f3f4f6; display: flex; align-items: center; justify-content: center; min-height: 200px; }
        .img-screenshot { display: block; width: 100%; height: auto; }
        
        .dica, .aviso { display: flex; gap: 1rem; padding: 1rem 1.25rem; border-radius: 8px; margin: 1.5rem 0; }
        .dica { background-color: rgba(20, 184, 166, 0.08); border-left: 4px solid var(--teal-500); }
        .dica .material-icons-round { color: var(--teal-500); }
        .aviso { background-color: var(--amber-100); border-left: 4px solid var(--amber-500); }
        .aviso .material-icons-round { color: var(--amber-500); }

        .tabela-info { width: 100%; border-collapse: collapse; margin: 1.5rem 0; font-size: 0.9375rem; }
        .tabela-info th, .tabela-info td { padding: 0.75rem 1rem; text-align: left; border-bottom: 1px solid var(--gray-200); }
        .tabela-info th { background-color: var(--gray-50); font-weight: 600; color: var(--gray-700); }
        
        .btn-toggle-sidebar { background: none; border: none; color: var(--gray-400); padding: 0.5rem; cursor: pointer; }

        /* --- NOVO CSS: BARRA DE FERRAMENTAS DO EDITOR --- */
        #admin-toolbar {
            position: fixed; bottom: 20px; right: 20px; 
            background: var(--gray-900); padding: 10px; border-radius: 50px;
            display: flex; gap: 10px; box-shadow: 0 4px 20px rgba(0,0,0,0.3); z-index: 1000;
        }
        .admin-btn {
            background: rgba(255,255,255,0.1); border: none; width: 44px; height: 44px;
            border-radius: 50%; color: #fff; cursor: pointer; display: flex; align-items: center; justify-content: center;
            transition: all 0.2s; position: relative;
        }
        .admin-btn:hover { background: var(--teal-500); transform: translateY(-2px); }
        .admin-btn.active { background: var(--teal-500); box-shadow: 0 0 10px var(--teal-500); }
        
        /* Tooltip simples */
        .admin-btn::after {
            content: attr(data-tooltip); position: absolute; bottom: 55px; left: 50%; transform: translateX(-50%);
            background: #000; color: #fff; padding: 5px 10px; border-radius: 4px; font-size: 12px;
            white-space: nowrap; opacity: 0; pointer-events: none; transition: opacity 0.2s;
        }
        .admin-btn:hover::after { opacity: 1; }

        /* Estilo visual quando em modo edição */
        body.editing-mode [contenteditable="true"] {
            outline: 2px dashed rgba(20, 184, 166, 0.3);
            cursor: text;
        }
        body.editing-mode [contenteditable="true"]:focus {
            outline: 2px solid var(--teal-500); background-color: rgba(255,255,255,0.8);
        }
    </style>
</head>
<body>

    <div id="admin-toolbar">
        <button class="admin-btn" onclick="toggleEditMode()" data-tooltip="Ativar/Desativar Edição">
            <span class="material-icons-round" id="icon-edit">edit</span>
        </button>
        <button class="admin-btn" onclick="downloadHtml()" data-tooltip="Baixar HTML Editado">
            <span class="material-icons-round">save_alt</span>
        </button>
        <button class="admin-btn" onclick="printManual()" data-tooltip="Imprimir / PDF">
            <span class="material-icons-round">print</span>
        </button>
    </div>

    <header class="header">
        <div class="header-left">
            <svg class="logo" viewBox="0 0 180 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M8 38L20 26L32 38" stroke="#84CC16" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M8 28L20 16L32 28" stroke="#14B8A6" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
                <text x="44" y="34" fill="#E5E7EB" font-family="Work Sans" font-weight="700" font-size="22" class="editable-text">EMPRESA</text>
                <text x="150" y="34" fill="#9CA3AF" font-family="Work Sans" font-weight="400" font-size="22" class="editable-text">Manual</text>
            </svg>
            <div class="header-divider"></div>
            <span class="header-title editable-text">Nome do Sistema v1.0</span>
        </div>
        <div class="header-right">
            <span class="badge-versao editable-text">Versão 1.0</span>
            <button class="btn-toggle-sidebar" onclick="toggleSidebar()">
                <span class="material-icons-round">menu</span>
            </button>
        </div>
    </header>

    <div class="layout">
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h2 class="editable-text">Sumário</h2>
            </div>
            <nav class="sidebar-nav">
                <div class="nav-group">
                    <div class="nav-group-header" onclick="toggleNavGroup(this)">
                        <span class="editable-text">Introdução</span>
                        <span class="material-icons-round">expand_more</span>
                    </div>
                    <div class="nav-group-content">
                        <a href="#secao-1" class="editable-text">1. Visão Geral</a>
                        <a href="#secao-2" class="editable-text">2. Funcionalidades</a>
                    </div>
                </div>
                <div class="nav-group">
                    <div class="nav-group-header" onclick="toggleNavGroup(this)">
                        <span class="editable-text">Configurações</span>
                        <span class="material-icons-round">expand_more</span>
                    </div>
                    <div class="nav-group-content">
                        <a href="#secao-3" class="editable-text">3. Tabelas</a>
                        <a href="#secao-4" class="editable-text">4. Dicas</a>
                    </div>
                </div>
            </nav>
        </aside>

        <main class="main-content">
            <div class="content-wrapper">

                <section class="secao" id="secao-1">
                    <div class="secao-header">
                        <span class="secao-numero editable-text">1</span>
                        <h2 class="editable-text">Visão Geral</h2>
                    </div>
                    <div class="secao-conteudo editable-area">
                        <h3>1.1 Subtítulo Editável</h3>
                        <p>Clique no botão de lápis (canto inferior direito) para começar a editar este texto. Você pode escrever o que quiser aqui.</p>
                        <p>Lorem ipsum dolor sit amet.</p>
                    </div>
                </section>

                <section class="secao" id="secao-2">
                    <div class="secao-header">
                        <span class="secao-numero editable-text">2</span>
                        <h2 class="editable-text">Telas do Sistema</h2>
                    </div>
                    <div class="secao-conteudo editable-area">
                        <h3>2.1 Exemplo de Imagem</h3>
                        <p>Para mudar a imagem abaixo, no modo edição, você precisará alterar o 'src' no código ou colar uma URL.</p>
                        <div class="img-container">
                            <div class="img-wrapper">
                                <img src="https://placehold.co/800x400/e5e7eb/6b7280?text=Screenshot+Exemplo" class="img-screenshot" alt="Print">
                            </div>
                            <p class="img-caption">Legenda da imagem</p>
                        </div>
                    </div>
                </section>

                <section class="secao" id="secao-3">
                    <div class="secao-header">
                        <span class="secao-numero editable-text">3</span>
                        <h2 class="editable-text">Dados Estruturados</h2>
                    </div>
                    <div class="secao-conteudo editable-area">
                        <p>Edite os valores da tabela abaixo diretamente:</p>
                        <table class="tabela-info">
                            <tr>
                                <th>Parâmetro</th>
                                <th>Descrição</th>
                                <th>Ações (Exemplo Visual)</th>
                            </tr>
                            <tr>
                                <td>Campo Nome</td>
                                <td>Descrição do campo nome</td>
                                <td><span class="material-icons-round" style="font-size:18px; color:#14B8A6">edit</span></td>
                            </tr>
                            <tr>
                                <td>Campo Email</td>
                                <td>Validação de email obrigatória</td>
                                <td><span class="material-icons-round" style="font-size:18px; color:#EF4444">delete</span></td>
                            </tr>
                        </table>
                    </div>
                </section>

                <section class="secao" id="secao-4">
                    <div class="secao-header">
                        <span class="secao-numero editable-text">4</span>
                        <h2 class="editable-text">Alertas</h2>
                    </div>
                    <div class="secao-conteudo editable-area">
                        <div class="dica">
                            <span class="material-icons-round">lightbulb</span>
                            <p><strong>Dica:</strong> Edite este texto para dar uma dica útil.</p>
                        </div>
                        <div class="aviso">
                            <span class="material-icons-round">warning</span>
                            <p><strong>Aviso:</strong> Edite este texto para um alerta de perigo.</p>
                        </div>
                    </div>
                </section>

            </div>
        </main>
    </div>

    <script>
        // 1. LÓGICA DE NAVEGAÇÃO (ORIGINAL)
        function toggleSidebar() { document.getElementById('sidebar').classList.toggle('collapsed'); }
        function toggleNavGroup(header) { header.parentElement.classList.toggle('collapsed'); }

        const sections = document.querySelectorAll('.secao');
        const navLinks = document.querySelectorAll('.sidebar-nav a');
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    navLinks.forEach(link => {
                        link.classList.remove('active');
                        if (link.getAttribute('href').substring(1) === entry.target.id) {
                            link.classList.add('active');
                        }
                    });
                }
            });
        }, { threshold: 0.3 });
        sections.forEach(section => observer.observe(section));

        // 2. LÓGICA DE EDIÇÃO (NOVA)
        let isEditing = false;
        
        function toggleEditMode() {
            isEditing = !isEditing;
            const body = document.body;
            const btnIcon = document.getElementById('icon-edit');
            
            // Alterna classe para visual
            if(isEditing) {
                body.classList.add('editing-mode');
                btnIcon.textContent = 'check'; // Muda ícone para Check
                
                // Torna elementos editáveis
                document.querySelectorAll('.editable-text, .editable-area').forEach(el => {
                    el.contentEditable = "true";
                });
            } else {
                body.classList.remove('editing-mode');
                btnIcon.textContent = 'edit'; // Volta ícone para Lápis
                
                // Remove edição
                document.querySelectorAll('.editable-text, .editable-area').forEach(el => {
                    el.contentEditable = "false";
                });
            }
        }

        // 3. LÓGICA DE DOWNLOAD (NOVA)
        function downloadHtml() {
            // Clona o documento atual
            const htmlContent = document.documentElement.outerHTML;
            
            // Cria um blob
            const blob = new Blob([htmlContent], {type: 'text/html'});
            const url = URL.createObjectURL(blob);
            
            // Cria link falso e clica
            const a = document.createElement('a');
            a.href = url;
            a.download = 'manual_novo.html';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }

        // 4. LÓGICA DE IMPRESSÃO (NOVA)
        function printManual() {
            // Esconde sidebar e toolbar para impressão limpa
            window.print();
        }
    </script>
</body>
</html>
